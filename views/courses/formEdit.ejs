<!DOCTYPE html>
<html lang="es">

<%- include('../partials/head',{ title: "Agregar Curso" }) %>

  <body class="form">
    <!-- encabezado -->
    <%- include('../partials/header') %>

      <!-- principal -->
      <main class="form__main">
        <h2>Formulario: Editar Curso</h2>
        <hr>
        <div class="row">
          <div class="col-12 col-md-8 mx-auto">
            <div class="card">
              <div class="card-body">
                <form action="/courses/update/<%= id %>?_method=PUT" class="row" method="POST" enctype="multipart/form-data">
                  <div class="col-9 mb-3">
                    <label for="title" class="form-label">Título</label>
                    <input type="text" class="form-control<%= locals.errors && errors.title ? 'is-invalid' : null%>" 
                    id="title" placeholder="Título del curso" name="title"
                      value="<%= locals.old && old.title ? old.title : title %>">
                    <small class="text-danger ms-2">
                      <%= locals.errors && errors.title ? errors.title.msg : title %>
                    </small>
                  </div>
                  <div class="col-3 mb-3">
                    <label for="price" class="form-label <%= locals.errors && errors.price ? 'is-invalid' : null%>">Precio</label>
                    <input type="number" class="form-control <%= locals.errors && errors.price ? 'is-invalid' : null%>" 
                    id="price" name="price" value="<%= locals.old && old.price ? old.price : price %>">
                    <small class="text-danger ms-2"><%= locals.errors && errors.price ? errors.price.msg : price %>
                    </small>
                  </div>
                  <div class="col-12 mb-3">
                    <label for="chef" class="form-label">Chef</label>
                    <select name="chef" id="chef" class="form-control">
                      <option value="" selected hidden>Seleccione...</option>
                      <% chefs.forEach(({name})=> { %>
                        <option value="<%= name %>" <%=locals.old && old.chef && old.chef===name ? 'selected' : null %>><%= name %>
                        </option>
                        <% }) %>
                    </select>
                    <small class="text-danger ms-2"><%= locals.errors && errors.chef ? errors.chef.msg : null %>
                    </small>
                  </div>
                  <div class="col-12 mb-3">
                    <label for="description" class="form-label">Descripción</label>
                    <textarea class="form-control  <%= locals.errors && errors.description ? 'is-invalid' : null%>"
                       id="description" rows="3"
                      name="description"><%= locals.old && old.description ? old.description : description %></textarea>
                      <small class="text-danger ms-2"><%= locals.errors && errors.description ? errors.description.msg : null %>
                      </small>
                    </div>
                  <div class="col-12 mb-3">
                    <div class="d-flex justify-content-around">
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="section" id="new" <%=newest && 'checked' %> value= "newest">
                        <label class="form-check-label" for="new">
                          Nuevo
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="section" id="sale" <%=sale && 'checked' %>value= "sale">
                        <label class="form-check-label" for="sale">
                          Oferta
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="section" id="free" <%=free && 'checked' %>value= "free">
                        <label class="form-check-label" for="free">
                          Gratis
                        </label>
                      </div>
                    </div>
                    <small class="text-danger ms-2"><%= locals.errors && errors.section ? errors.section.msg : null %>
                    </small>
                  </div>
                  <div class="col-3 mb-3 d-flex justify-content-center align-items-end">
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" role="switch" id="visible" name="visible"
                        <%=visible && 'checked' %>>
                      <label class="form-check-label" for="visible">Visible</label>
                    </div>
                  </div>
                  <div class="col-9 mb-3">
                    <label for="image" class="form-label">Imagen</label>
                    <input type="file" class="form-control" id="image" name="image" />
                    <small class="text-danger ms-2"><%= locals.errors && errors.images ? errors.images.msg : null %></small>
                    </small>
                  </div>
                  <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-dark">Actualizar curso</button>
                  </div>
                </form>
              </div>
            </div>
          </div>

        </div>

      </main>
      <!-- pie de pagina -->

      <%- include('../partials/footer') %>


        <%- include('../partials/scripts') %>


  </body>

</html>